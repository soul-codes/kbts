# API reference

Version 0.3.0

> ℹ️ The API reference itself is generated by `kbts` using the
> [api](api.md "api") function, which is currently unstable.

> ℹ️ The API reference is work-in-progress, as does not contain complete
> information, although the information here should at least be correct.

*   Core API

    *   ## kb

        ```ts
        /**
         * Creates a new KB.
         *
         * Note that each created KB is a separate instance. This becomes significant
         * when it comes to embedding KBs.
         *
         * @param title
         * @param settings
         * @returns
         */
        function kb(
          title: string,
          settings: Partial<KbSettings> | undefined
        ): TemplateInterface<KBInstance>;

        ```

    *   ## em

        ```ts
         em: import("./protofactory.js").TemplateInterface<import("./types.js").Inline>
        ```

    *   ## s

        ```ts
         s: import("./protofactory.js").TemplateInterface<import("./types.js").Inline>
        ```

    *   ## d

        ```ts
         d: TemplateInterface<Node>
        ```

    *   ## code

        ```ts
         code: import("./protofactory.js").TemplateInterface<import("./types.js").Inline>
        ```

    *   ## codeBlock

        ```ts
         codeBlock: import("./protofactory.js").TemplateInterface<import("./types.js").Block>
        ```

    *   ## codeBlockLang

        ```ts
         codeBlockLang: (language: string) => import("./protofactory.js").TemplateInterface<import("./types.js").Block>
        ```

    *   ## quote

        ```ts
         quote: import("./protofactory.js").TemplateInterface<import("./types.js").Block>
        ```

    *   ## remark

        ```ts
         remark: (theme?: string | null) => import("./protofactory.js").TemplateInterface<import("./types.js").Block>
        ```

    *   ## inline

        ```ts
        /**
         * A higher-order function that can be used to create custom-styled inline.
         * @param style
         */
        function inline<T>(style: T): TemplateInterface<Inline>;

        ```

    *   ## block

        ```ts
        /**
         * A higher-order function that can be used to create custom-styled blocks.
         * @param style
         */
        function block<T>(style: T): TemplateInterface<Block>;

        ```

    *   ## api

        > ⚠️ Warning: This feature is experimental, and its behavior and
        > interface are unstable!

        The declaration capturing function. This is a **pragma**/compiled time
        function which will error out at run time. Instead, you need to use the
        TypeScript plugin that lives in `kbts/ts-plugin` and an over-TypeScript tool
        such as [ttypescript](https://www.npmjs.com/package/ttypescript "ttypescript")
        to process these calls at compile time.

        > 🔴 ATTENTION: Calling `api` at runtime without having its call processed
        > by TypeScript plugin will throw an exception.

        > 🔴 ATTENTION: `api` must be called directly or as an `import` alias.
        > The TypeScript plugin will not recognize indirect calls in the sense of
        > having `api` assigned to other variables.

        `api` is designed to capture declaration and type information of
        either the symbol fed as its first argument, or the type declaration of a
        type symbol fed as its first type argument. Further arguments can be supplied
        to customize the rest of the document.

        ```ts
         api: <T>(targetSymbol?: unknown, factory?: ((ref: Node) => Node) | undefined, settings?: Partial<KbSettings> | undefined) => KBInstance
        ```

*   Markdown APIs

    *   ## render

        ```ts
        /**
         * Renders the set of KBs as markdown documents.
         *
         * @param docs
         * @param options
         * @returns A set of markdown filename and texts that can be saved using `save`.
         */
        function render(
          docs: readonly KB[],
          options: Partial<RenderOptions> | undefined
        ): Promise<readonly OutputFile[]>;

        ```

    *   ## preferredFilename

        ```ts
        /**
         * Annotate a KB with a filename. This is a higher-order function that
         * returns a document-annotating function. The resulting document is
         * the same instance as the input, it is just decorated internally.
         *
         * @param filename
         * @returns
         */
        function preferredFilename(filename: string): <T extends KB>(document: T) => T;

        ```
